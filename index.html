<!DOCTYPE html>
<html>
  <head>
    <script src="lib/jquery.js" type="text/javascript" charset="utf-8"></script>
    <script src="lib/lodash.js" type="text/javascript" charset="utf-8"></script>
    <script src="lib/class.js" type="text/javascript" charset="utf-8"></script>
    <script src="lib/game_init.js" type="text/javascript" charset="utf-8"></script>
    <script src="lib/game.js" type="text/javascript" charset="utf-8"></script>
    <script src="lib/images.js" type="text/javascript" charset="utf-8"></script>
    <script src="lib/control.js" type="text/javascript" charset="utf-8"></script>
    <script src="lib/cowboy.js" type="text/javascript" charset="utf-8"></script>
    <script src="lib/cowboy_animations.js" type="text/javascript" charset="utf-8"></script>
    <script src="lib/simple_jump.js" type="text/javascript" charset="utf-8"></script>
    <script src="lib/physics_jump.js" type="text/javascript" charset="utf-8"></script>
    <script src="lib/physics_hold_jump.js" type="text/javascript" charset="utf-8"></script>
    <script src="lib/bullet.js" type="text/javascript" charset="utf-8"></script>

    <script src="lib/tumble_weed.js" type="text/javascript" charset="utf-8"></script>
    <script src="lib/collision_detection.js" type="text/javascript" charset="utf-8"></script>
    <title>Game</title>
  </head>
  <body>
    <div class="hud">
      <div class="info">
        <div class="dead" style="display:none">
          dead
        </div>
      </div>
      <div class="controls">
        <div class="jumpNshoot">
          Jump n Shoot: <input name="jumpNshoot" type="checkbox">
        </div>
        <div class="simple" style="display: none">
          Speed: <input name="speed" type="number" value="10">
        </div>
        <div class="physics" style="display: none">
          Velocity: <input name="velocity" type="number" value="40">
          Gravity: <input name="gravity" type="number" value="-3">
        </div>
        <div class="variable-physics" style="display: none">
          Starting Velocity: <input name="starting-velocity" type="number" value="-15">
          Gravity: <input name="gravity" type="number" value="0.5">
          Velocity when let go: <input name="gravity-released" type="number" value="-6">
        </div>

      </div>
    </div>
    <script type="text/javascript">
var gameInit = new GameInit();
var game = new Game(gameInit);

(function() {
    var onEachFrame;
    if (window.webkitRequestAnimationFrame) {
        onEachFrame = function(cb) {
            var _cb = function() { cb(); webkitRequestAnimationFrame(_cb); }
            _cb();
        };
    } else if (window.mozRequestAnimationFrame) {
        onEachFrame = function(cb) {
            var _cb = function() { cb(); mozRequestAnimationFrame(_cb); }
            _cb();
        };
    } else {
        onEachFrame = function(cb) {
            setInterval(cb, 1000 / 60);
        }
    }

    window.onEachFrame = onEachFrame;
})();

var gameImages = new Images(function() {
      window.onEachFrame(function() {
          var startTime = new Date().getTime();
          game.update();
          game.draw();
          var time = new Date().getTime() - startTime;
          if (time > 5)
              console.log(time)
      });
      });
    </script>
  </body>
</html>
