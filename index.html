<!DOCTYPE html>
<html>
  <head>
    <script src="lib/jquery.js" type="text/javascript" charset="utf-8"></script>
    <script src="lib/class.js" type="text/javascript" charset="utf-8"></script>
    <script src="lib/game_init.js" type="text/javascript" charset="utf-8"></script>
    <script src="lib/game.js" type="text/javascript" charset="utf-8"></script>
    <script src="lib/images.js" type="text/javascript" charset="utf-8"></script>
    <script src="lib/control.js" type="text/javascript" charset="utf-8"></script>
    <script src="lib/cowboy.js" type="text/javascript" charset="utf-8"></script>
    <script src="lib/cowboy_animations.js" type="text/javascript" charset="utf-8"></script>
    <title>Game</title>
  </head>
  <body>
    <script type="text/javascript">
var gameInit = new GameInit();
var game = new Game(gameInit);

(function() {
    var onEachFrame;
    if (window.webkitRequestAnimationFrame) {
        onEachFrame = function(cb) {
            var _cb = function() { cb(); webkitRequestAnimationFrame(_cb); }
            _cb();
        };
    } else if (window.mozRequestAnimationFrame) {
        onEachFrame = function(cb) {
            var _cb = function() { cb(); mozRequestAnimationFrame(_cb); }
            _cb();
        };
    } else {
        onEachFrame = function(cb) {
            setInterval(cb, 1000 / 60);
        }
    }
    
    window.onEachFrame = onEachFrame;
})();

var gameImages = new Images(function() {
      window.onEachFrame(function() {
          var startTime = new Date().getTime();
          game.update();
          game.draw();
          var time = new Date().getTime() - startTime;
          if (time > 5)
              console.log(time)
      });
      });
    </script>
  </body>
</html>
